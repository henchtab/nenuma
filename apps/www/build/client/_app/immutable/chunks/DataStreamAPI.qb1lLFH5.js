import{b as dt,a as o,e as K,t as n,f as _,s as e,c as f}from"./disclose-version.D6EsJnYG.js";import{p as it,d as ct,c as ut,a as ft,t as c,b as m,s as mt,w as bt}from"./index.mbo8UwIt.js";import{p as Y}from"./this.BQt3S_WI.js";import{u as pt,b as gt,a as C,s as P}from"./store.DptLI-NC.js";import{s as B}from"./class.vb17iJ9k.js";import{B as l}from"./index.BDYu8xO4.js";import{d as ht,L as G,I as J}from"./index.Cn8ZLEQg.js";import{f as v,b as k}from"./utils.YSFv-2po.js";import{d as j}from"./tma.rVQqEs2y.js";import{t as vt}from"./Toaster.svelte_svelte_type_style_lang.CEVEthHX.js";import{O as $t}from"./Output.5f7VTEva.js";import{S as _t}from"./Section.BFau_DlI.js";(function(){try{var b=typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},y=new Error().stack;y&&(b._sentryDebugIds=b._sentryDebugIds||{},b._sentryDebugIds[y]="a2125124-b8c4-4bfe-8472-0917a80b9143",b._sentryDebugIdIdentifier="sentry-dbid-a2125124-b8c4-4bfe-8472-0917a80b9143")}catch{}})();var yt=n("Stream Address <!>",1),wt=n("Deploy Stream",1),Dt=n("Deploy Batch",1),St=n("Deploy Session",1),xt=n("Publish Candlestick",1),At=n("Get Topic",1),It=n("Get Balance",1),Pt=n("Get Next Batch Id",1),Bt=n("Subscriber Address <!>",1),kt=n("Get Session Address",1),Nt=n("Batch ID <!>",1),Ot=n("Get Batch Address",1),Ct=n("Get Batches",1),Gt=n(`<!> <p class="mt-3 mb-8 text-ds-gray-900 max-w-[768px]">The Data Stream smart contract makes it easy to securely stream data and manage subscriptions on
    the blockchain. Publishers can deploy data batches, handle sessions, and manage subscriptions
    effortlessly. It ensures safe handling of deposits and notifications, offering a solid framework
    for real-time data interaction. Key features include verifying publishers, creating batches,
    deploying sessions, and automating notifications. <br> <br> For more details, check out the <a class="underline" href="https://github.com/dreamqip/nenuma/blob/main/contracts/contracts/data_stream.tact" target="_blank">contract code</a> and its features here.</p> <div class="flex gap-4 pb-6 items-end overflow-x-auto snap-x snap-mandatory [-webkit-overflow-scrolling:_touch] scroll-smooth"><a><!></a> <a><!></a> <a><!></a> <a><!></a> <!> <!> <!> <form class="flex snap-start flex-col gap-4"><!> <!></form> <form class="flex snap-start flex-col gap-4"><!> <!></form> <!></div> <!>`,1);function Ht(b,y){it(y,!0);const $={};pt($);const p=()=>C(H,"$stream",$),w=()=>C(D,"$streamAddress",$),a=()=>C(Q,"$shouldDisableActions",$),D=bt(""),H=ht(D),Q=ct([D],([d])=>!d);let i=ut(Y([]));async function W(d){d.preventDefault();const g=new FormData(d.currentTarget).get("subscriberAddress"),h=await p().getSessionAddress(j.Address.parse(g));m(i).unshift({date:v(new Date),message:JSON.stringify(h,null,2)})}async function X(d){d.preventDefault();const g=new FormData(d.currentTarget).get("batchId"),h=await p().getBatchAddress(BigInt(g));m(i).unshift({date:v(new Date),message:JSON.stringify(h,null,2)})}var T=dt(),z=_(T);_t(z,{title:"Data Stream",children:(d,R)=>{var g=Gt(),h=_(g);G(h,{class:"grid gap-2 mt-4",children:(t,r)=>{var s=yt(),u=e(_(s,!0));J(u,{type:"text",placeholder:"0QDCiYqpPo9esMDX35_BWYcsR1NKS7lbnPcPF6IMH8MNx2Lj",class:"w-fit",get value(){return w()},set value(lt){gt(D,lt)}}),o(t,s)},$$slots:{default:!0}});var V=e(e(h,!0)),q=e(e(V,!0)),S=f(q);c(()=>B(S,k("snap-start",a()&&"cursor-not-allowed"))),c(()=>P(S,"href",`/playground/streams-api/deploy?contract=stream&title=${encodeURIComponent("Data Stream")}&subtitle=stream`));var Z=f(S);l(Z,{class:"bg-ds-teal-800 hover:bg-ds-teal-700 text-white",children:(t,r)=>{var s=wt();o(t,s)},$$slots:{default:!0}});var x=e(e(S,!0));c(()=>B(x,k("snap-start",a()&&"cursor-not-allowed"))),c(()=>P(x,"href",a()?void 0:`/playground/streams-api/deploy?contract=batch&title=${encodeURIComponent("Subscription Batch")}&subtitle=batch&streamAddress=${w()}`));var tt=f(x);l(tt,{get disabled(){return a()},class:"bg-ds-teal-800 hover:bg-ds-teal-700 text-white",children:(t,r)=>{var s=Dt();o(t,s)},$$slots:{default:!0}});var A=e(e(x,!0));c(()=>B(A,k("snap-start",a()&&"cursor-not-allowed"))),c(()=>P(A,"href",a()?void 0:`/playground/streams-api/deploy?contract=session&title=${encodeURIComponent("Session")}&subtitle=session&streamAddress=${w()}`));var et=f(A);l(et,{get disabled(){return a()},class:"bg-ds-teal-800 hover:bg-ds-teal-700 text-white",children:(t,r)=>{var s=St();o(t,s)},$$slots:{default:!0}});var I=e(e(A,!0));c(()=>B(I,k("snap-start",a()&&"cursor-not-allowed"))),c(()=>P(I,"href",a()?void 0:`/playground/streams-api/deploy?contract=candlestick&title=${encodeURIComponent("Candlestick")}&subtitle=candlestick&streamAddress=${w()}`));var st=f(I);l(st,{get disabled(){return a()},class:"bg-ds-teal-800 hover:bg-ds-teal-700 text-white",children:(t,r)=>{var s=xt();o(t,s)},$$slots:{default:!0}});var E=e(e(I,!0));l(E,{get disabled(){return a()},class:"bg-ds-blue-800 snap-start text-white hover:bg-ds-blue-700",onclick:async()=>{try{const t=await p().getTopic();m(i).unshift({date:v(new Date),message:JSON.stringify(t,null,2)})}catch(t){t instanceof Error&&vt.error(t.message)}},children:(t,r)=>{var s=At();o(t,s)},$$slots:{default:!0}});var F=e(e(E,!0));l(F,{get disabled(){return a()},class:"bg-ds-blue-800 snap-start text-white hover:bg-ds-blue-700",onclick:async()=>{const t=await p().getBalance();m(i).unshift({date:v(new Date),message:JSON.stringify(`${j.fromNano(t)} TON`,null,2)})},children:(t,r)=>{var s=It();o(t,s)},$$slots:{default:!0}});var U=e(e(F,!0));l(U,{get disabled(){return a()},class:"bg-ds-blue-800 snap-start text-white hover:bg-ds-blue-700",onclick:async()=>{const t=await p().getNextBatchId();m(i).unshift({date:v(new Date),message:JSON.stringify(t.toString(),null,2)})},children:(t,r)=>{var s=Pt();o(t,s)},$$slots:{default:!0}});var N=e(e(U,!0)),L=f(N);G(L,{class:"grid gap-2",children:(t,r)=>{var s=Bt(),u=e(_(s,!0));J(u,{type:"text",name:"subscriberAddress",placeholder:"Enter a subscriber address",required:!0}),o(t,s)},$$slots:{default:!0}});var at=e(e(L,!0));l(at,{get disabled(){return a()},type:"submit",class:"bg-ds-blue-800 text-white hover:bg-ds-blue-700",children:(t,r)=>{var s=kt();o(t,s)},$$slots:{default:!0}});var O=e(e(N,!0)),M=f(O);G(M,{class:"grid gap-2",children:(t,r)=>{var s=Nt(),u=e(_(s,!0));J(u,{type:"number",name:"batchId",placeholder:"Enter a batch ID",required:!0}),o(t,s)},$$slots:{default:!0}});var rt=e(e(M,!0));l(rt,{get disabled(){return a()},type:"submit",class:"bg-ds-blue-800 text-white hover:bg-ds-blue-700",children:(t,r)=>{var s=Ot();o(t,s)},$$slots:{default:!0}});var ot=e(e(O,!0));l(ot,{get disabled(){return a()},class:"bg-ds-blue-800 snap-start text-white hover:bg-ds-blue-700",onclick:async()=>{const t=await p().getBatches(),r=[];for(const[s,u]of t)r.push({[s.toString({testOnly:!0,bounceable:!1})]:u.subscriptionsCount.toString()});m(i).unshift({date:v(new Date),message:JSON.stringify(r,null,2)})},children:(t,r)=>{var s=Ct();o(t,s)},$$slots:{default:!0}});var nt=e(e(q,!0));$t(nt,{get output(){return m(i)},set output(t){mt(i,Y(t))}}),K("submit",N,W,!1),K("submit",O,X,!1),o(d,g)},$$slots:{default:!0}}),o(b,T),ft()}export{Ht as D};
//# sourceMappingURL=DataStreamAPI.qb1lLFH5.js.map
