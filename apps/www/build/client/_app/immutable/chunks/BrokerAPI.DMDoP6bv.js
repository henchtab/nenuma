import{b as tt,a as s,e as et,t as a,f as D,s as e,c as b}from"./disclose-version.BX9sjkWX.js";import{p as rt,d as st,c as at,a as ot,t as M,b as u,s as nt,w as dt}from"./index.mbo8UwIt.js";import{p as q}from"./this.BAuJCPR5.js";import{u as it,b as lt,a as x,s as L}from"./store.bP1OfJqg.js";import{B as d}from"./index.DDlW02wl.js";import{u as ut,L as R,I as T}from"./index.Do2oo2WQ.js";import{f as g}from"./utils.Ddqmgtfs.js";import{d as ct}from"./tma.h_RQhYAu.js";import"./Toaster.svelte_svelte_type_style_lang.CEVEthHX.js";import{O as pt}from"./Output.DAlFtpD6.js";import{S as gt}from"./Section.qNPrB2A1.js";(function(){try{var c=typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},m=new Error().stack;m&&(c._sentryDebugIds=c._sentryDebugIds||{},c._sentryDebugIds[m]="4532d1ab-c099-4d4b-8090-2420eb97a54f",c._sentryDebugIdIdentifier="sentry-dbid-4532d1ab-c099-4d4b-8090-2420eb97a54f")}catch{}})();var ft=a("Broker Address <!>",1),bt=a("Deposit",1),mt=a("Withdraw",1),vt=a("Deploy Option",1),ht=a("Get Balance",1),$t=a("Get Owner",1),_t=a("Option ID",1),yt=a("Get Option Address",1),wt=a("Get Next Option ID",1),kt=a("Get Stream",1),Dt=a("Get Payout Coefficient",1),xt=a(`<!> <p class="mt-3 mb-8 text-ds-gray-900 max-w-[640px]">Handles brokers and cash-or-nothing options. Sets up options, checks agreements, and ensures
    enough deposit. Manages deposits and withdrawals, handles deployments, payouts, and
    notifications for options settling in, out, or at the money. Keeps track of balances and sends
    success messages to the right folks.</p> <div class="flex gap-4 items-end overflow-x-auto snap-x snap-mandatory pb-6"><a class="snap-start"><!></a> <!> <a class="snap-start"><!></a> <!> <!> <form class="flex flex-col gap-4 w-max snap-start"><div class="grid gap-2"><!> <!></div> <!></form> <!> <!> <!></div> <!>`,1);function qt(c,m){rt(m,!0);const f={};it(f);const l=()=>x(F,"$broker",f),_=()=>x(v,"$brokerAddress",f),o=()=>x(H,"$shouldDisableActions",f),v=dt(""),F=ut(v),H=st([v],([p])=>!p);let i=at(q([]));async function K(p){p.preventDefault();const I=new FormData(p.currentTarget),h=BigInt(I.get("optionId")),$=await l().getOptionAddress(h);u(i).unshift({date:g(new Date),message:JSON.stringify($.toString({testOnly:!0,bounceable:!1}),null,2)})}var O=tt(),U=D(O);gt(U,{title:"Broker",children:(p,I)=>{var h=xt(),$=D(h);R($,{class:"grid gap-2 mt-4",children:(t,n)=>{var r=ft(),V=e(D(r,!0));T(V,{type:"text",placeholder:"0QDCiYqpPo9esMDX35_BWYcsR1NKS7lbnPcPF6IMH8MNx2Lj",class:"w-fit",get value(){return _()},set value(Z){lt(v,Z)}}),s(t,r)},$$slots:{default:!0}});var W=e(e($,!0)),S=e(e(W,!0)),y=b(S);M(()=>L(y,"href",o()?void 0:`/playground/options-api/deploy?contract=brokerDeposit&title=${encodeURIComponent("Deposit Broker")}&forceTitle=true&broker=${_()}`));var Y=b(y);d(Y,{class:"bg-ds-teal-800 hover:bg-ds-teal-700 text-white",get disabled(){return o()},children:(t,n)=>{var r=bt();s(t,r)},$$slots:{default:!0}});var P=e(e(y,!0));d(P,{class:"snap-start bg-ds-teal-800 hover:bg-ds-teal-700 text-white",get disabled(){return o()},onclick:async()=>await l().withdraw({queryId:BigInt(Date.now())}),children:(t,n)=>{var r=mt();s(t,r)},$$slots:{default:!0}});var w=e(e(P,!0));M(()=>L(w,"href",o()?void 0:`/playground/options-api/deploy?contract=brokerOption&title=${encodeURIComponent("Cash-or-Nothing Option")}&broker=${_()}`));var j=b(w);d(j,{class:"bg-ds-teal-800 hover:bg-ds-teal-700 text-white",get disabled(){return o()},children:(t,n)=>{var r=vt();s(t,r)},$$slots:{default:!0}});var B=e(e(w,!0));d(B,{class:"bg-ds-blue-800 text-white hover:bg-ds-blue-700 snap-start",get disabled(){return o()},onclick:async()=>{const t=await l().getBalance();u(i).unshift({date:g(new Date),message:JSON.stringify(`${ct.fromNano(t)} TON`,null,2)})},children:(t,n)=>{var r=ht();s(t,r)},$$slots:{default:!0}});var N=e(e(B,!0));d(N,{class:"bg-ds-blue-800 text-white hover:bg-ds-blue-700 snap-start",get disabled(){return o()},onclick:async()=>{const t=await l().getOwner();u(i).unshift({date:g(new Date),message:JSON.stringify(t.toString({testOnly:!0,bounceable:!1}),null,2)})},children:(t,n)=>{var r=$t();s(t,r)},$$slots:{default:!0}});var k=e(e(N,!0)),A=b(k),G=b(A);R(G,{for:"optionId",children:(t,n)=>{var r=_t();s(t,r)},$$slots:{default:!0}});var E=e(e(G,!0));T(E,{type:"number",name:"optionId",id:"optionId",placeholder:"777",required:!0,min:"0"});var Q=e(e(A,!0));d(Q,{type:"submit",get disabled(){return o()},class:"bg-ds-blue-800 text-white hover:bg-ds-blue-700",children:(t,n)=>{var r=yt();s(t,r)},$$slots:{default:!0}});var J=e(e(k,!0));d(J,{class:"bg-ds-blue-800 snap-start text-white hover:bg-ds-blue-700",get disabled(){return o()},onclick:async()=>{const t=await l().getNextOptionId();u(i).unshift({date:g(new Date),message:JSON.stringify(t.toString(),null,2)})},children:(t,n)=>{var r=wt();s(t,r)},$$slots:{default:!0}});var C=e(e(J,!0));d(C,{class:"bg-ds-blue-800 snap-start text-white hover:bg-ds-blue-700",get disabled(){return o()},onclick:async()=>{const t=await l().getStream();u(i).unshift({date:g(new Date),message:JSON.stringify(t.toString({testOnly:!0}),null,2)})},children:(t,n)=>{var r=kt();s(t,r)},$$slots:{default:!0}});var X=e(e(C,!0));d(X,{class:"bg-ds-blue-800 snap-start text-white hover:bg-ds-blue-700",get disabled(){return o()},onclick:async()=>{const t=await l().getPayout();u(i).unshift({date:g(new Date),message:JSON.stringify({nominator:t.nominator.toString(),denominator:t.denominator.toString()},null,2)})},children:(t,n)=>{var r=Dt();s(t,r)},$$slots:{default:!0}});var z=e(e(S,!0));pt(z,{get output(){return u(i)},set output(t){nt(i,q(t))}}),et("submit",k,K,!1),s(p,h)},$$slots:{default:!0}}),s(c,O),ot()}export{qt as B};
//# sourceMappingURL=BrokerAPI.DMDoP6bv.js.map
