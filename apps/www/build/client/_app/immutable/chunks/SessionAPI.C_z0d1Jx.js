import{b as V,a as r,e as I,t as a,f,s as t,c as _}from"./disclose-version.u5Z3pXpL.js";import{p as Z,c as ee,a as te,b,s as se,w as re}from"./index.mbo8UwIt.js";import{p as G}from"./this.BkV_1EO3.js";import{u as ae,b as ne,a as J}from"./store.CGJjtedz.js";import{B as p}from"./index.BGUkzaut.js";import{e as oe,L as g,I as v}from"./index.BFv1cshu.js";import{f as h}from"./utils.DKZFuNm_.js";import{d as ie}from"./tma.DBwO2EMO.js";import{O as le}from"./Output.D7EGobYY.js";import{S as ue}from"./Section.CQErr61O.js";(function(){try{var m=typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},$=new Error().stack;$&&(m._sentryDebugIds=m._sentryDebugIds||{},m._sentryDebugIds[$]="e4723992-c48e-4645-9c34-f5ace5ebbe9f",m._sentryDebugIdIdentifier="sentry-dbid-e4723992-c48e-4645-9c34-f5ace5ebbe9f")}catch{}})();var de=a("Subscriber Address <!>",1),ce=a("Notifications Count <!>",1),fe=a("Query ID <!>",1),pe=a("Subscribe",1),me=a("Query ID <!>",1),be=a("Unsubscribe",1),ge=a("Query ID <!>",1),ve=a("Destroy",1),he=a("Get Stream Address",1),$e=a("Get Balance",1),ye=a("Get Batch Address",1),_e=a("Get Subscriber Address",1),we=a(`<!> <p class="mt-3 mb-8 text-ds-gray-900 max-w-[640px]">The Session contract handles individual subscriptions in a data stream system on the blockchain.
    It manages subscriber info, deposits, and notifications. Key features include: Deploying
    sessions Managing subscriptions (starting, topping up, unsubscribing) Forwarding data
    notifications (like candlesticks) Handling deposits for various actions This contract ensures
    subscribers get the data they signed up for and manages the lifecycle of a subscription
    efficiently. <br> <br> For more details, you can explore the <a class="underline" href="https://github.com/dreamqip/nenuma/blob/main/contracts/contracts/session.tact" target="_blank">contract code</a> and its functionality.</p> <div class="flex mt-8 gap-4 items-end overflow-x-auto pb-6 snap-x snap-mandatory"><form class="flex snap-start flex-col gap-4 min-w-max"><!> <!> <!></form> <form class="flex snap-start flex-col gap-4 min-w-max"><!> <!></form> <form class="flex snap-start flex-col gap-4 min-w-max"><!> <!></form> <!> <!> <!> <!></div> <!>`,1);function Ne(m,$){Z($,!0);const y={};ae(y);const u=()=>J(Q,"$session",y),M=()=>J(w,"$subscriberAddress",y),w=re(""),Q=oe(w);let d=ee(G([]));async function L(o){o.preventDefault();const c=new FormData(o.currentTarget),l={notificationsCount:BigInt(c.get("notificationsCount")),queryId:BigInt(c.get("queryId"))};await u().subscribe(l)}async function H(o){o.preventDefault();const c=new FormData(o.currentTarget),l={queryId:BigInt(c.get("queryId"))};await u().unsubscribe(l)}async function K(o){o.preventDefault();const c=new FormData(o.currentTarget),l={queryId:BigInt(c.get("queryId"))};await u().destroy(l)}var k=V(),U=f(k);ue(U,{title:"Session",children:(o,c)=>{var l=we(),P=f(l);g(P,{class:"grid gap-2 mt-4",children:(e,n)=>{var s=de(),i=t(f(s,!0));v(i,{type:"text",name:"subscriberAddress",placeholder:"0QDCiYqpPo9esMDX35_BWYcsR1NKS7lbnPcPF6IMH8MNx2Lj",required:!0,class:"w-fit",get value(){return M()},set value(z){ne(w,z)}}),r(e,s)},$$slots:{default:!0}});var Y=t(t(P,!0)),q=t(t(Y,!0)),x=_(q),A=_(x);g(A,{class:"flex flex-col gap-2",children:(e,n)=>{var s=ce(),i=t(f(s,!0));v(i,{type:"number",name:"notificationsCount",placeholder:"4",required:!0,min:"1"}),r(e,s)},$$slots:{default:!0}});var B=t(t(A,!0));g(B,{class:"flex flex-col gap-2",children:(e,n)=>{var s=fe(),i=t(f(s,!0));v(i,{type:"number",name:"queryId",placeholder:"777",required:!0,min:"0"}),r(e,s)},$$slots:{default:!0}});var j=t(t(B,!0));p(j,{class:"bg-ds-teal-800 text-white hover:bg-ds-teal-700",type:"submit",children:(e,n)=>{var s=pe();r(e,s)},$$slots:{default:!0}});var S=t(t(x,!0)),O=_(S);g(O,{class:"flex flex-col gap-2",children:(e,n)=>{var s=me(),i=t(f(s,!0));v(i,{type:"number",name:"queryId",placeholder:"777",required:!0,min:"0"}),r(e,s)},$$slots:{default:!0}});var E=t(t(O,!0));p(E,{class:"bg-ds-teal-800 text-white hover:bg-ds-teal-700",type:"submit",children:(e,n)=>{var s=be();r(e,s)},$$slots:{default:!0}});var D=t(t(S,!0)),N=_(D);g(N,{class:"flex flex-col gap-2",children:(e,n)=>{var s=ge(),i=t(f(s,!0));v(i,{type:"number",name:"queryId",placeholder:"777",required:!0,min:"0"}),r(e,s)},$$slots:{default:!0}});var R=t(t(N,!0));p(R,{class:"bg-ds-teal-800 text-white hover:bg-ds-teal-700",type:"submit",children:(e,n)=>{var s=ve();r(e,s)},$$slots:{default:!0}});var F=t(t(D,!0));p(F,{class:"bg-ds-pink-800 snap-start text-white hover:bg-ds-pink-700",onclick:async()=>{const e=await u().getStreamAddress();b(d).unshift({date:h(new Date),message:JSON.stringify(e.toString({testOnly:!0,bounceable:!1}),null,2)})},children:(e,n)=>{var s=he();r(e,s)},$$slots:{default:!0}});var T=t(t(F,!0));p(T,{class:"bg-ds-pink-800 snap-start text-white hover:bg-ds-pink-700",onclick:async()=>{const e=await u().getBalance();b(d).unshift({date:h(new Date),message:JSON.stringify(`${ie.fromNano(e)} TON`,null,2)})},children:(e,n)=>{var s=$e();r(e,s)},$$slots:{default:!0}});var C=t(t(T,!0));p(C,{class:"bg-ds-pink-800 snap-start text-white hover:bg-ds-pink-700",onclick:async()=>{const e=await u().getBatchAddress();if(!e){b(d).unshift({date:h(new Date),message:"No batch address found"});return}b(d).unshift({date:h(new Date),message:JSON.stringify(e.toString({testOnly:!0,bounceable:!1}),null,2)})},children:(e,n)=>{var s=ye();r(e,s)},$$slots:{default:!0}});var W=t(t(C,!0));p(W,{class:"bg-ds-pink-800 text-white snap-start hover:bg-ds-pink-700",onclick:async()=>{const e=await u().getSubscriberAddress();b(d).unshift({date:h(new Date),message:JSON.stringify(e.toString({testOnly:!0,bounceable:!1}),null,2)})},children:(e,n)=>{var s=_e();r(e,s)},$$slots:{default:!0}});var X=t(t(q,!0));le(X,{get output(){return b(d)},set output(e){se(d,G(e))}}),I("submit",x,L,!1),I("submit",S,H,!1),I("submit",D,K,!1),r(o,l)},$$slots:{default:!0}}),r(m,k),te()}export{Ne as S};
//# sourceMappingURL=SessionAPI.C_z0d1Jx.js.map
