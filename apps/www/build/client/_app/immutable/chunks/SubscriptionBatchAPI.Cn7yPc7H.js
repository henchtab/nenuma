import{b as A,a,t as n,f as y,s as e,c as q}from"./disclose-version.D6EsJnYG.js";import{p as L,c as F,a as K,b as u,s as T,w as j}from"./index.mbo8UwIt.js";import{p as x}from"./this.BQt3S_WI.js";import{u as z,b as H,a as k}from"./store.DptLI-NC.js";import{B as l}from"./index.BDYu8xO4.js";import{g as M,L as Q,I as R}from"./index.Cn8ZLEQg.js";import{f as p}from"./utils.YSFv-2po.js";import{d as U}from"./tma.rVQqEs2y.js";import{O as V}from"./Output.5f7VTEva.js";import{S as W}from"./Section.BFau_DlI.js";import{t as f}from"./Toaster.svelte_svelte_type_style_lang.CEVEthHX.js";(function(){try{var i=typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},b=new Error().stack;b&&(i._sentryDebugIds=i._sentryDebugIds||{},i._sentryDebugIds[b]="daf34d2a-299e-4f61-ab30-000d32ecaa1d",i._sentryDebugIdIdentifier="sentry-dbid-daf34d2a-299e-4f61-ab30-000d32ecaa1d")}catch{}})();var X=n("Batch ID <!>",1),Y=n("Get Balance",1),Z=n("Get Batch ID",1),tt=n("Get Stream Address",1),et=n("Get Subscriptions",1),rt=n("Get Subscriptions Count",1),st=n(`<!> <p class="mt-3 mb-8 text-ds-gray-900 max-w-[768px]">Subscription Batch is a smart contract that handles subscription management for data streams on
    the blockchain. It lets publishers manage multiple subscriptions, track remaining notifications,
    and handle deposits. Key features include adding new subscriptions, topping up existing ones,
    and publishing data (like candlesticks). It also ensures that subscribers receive timely
    notifications and that publishers cover costs efficiently. <br> <br> For more details, you
    can explore the <a class="underline" href="https://github.com/dreamqip/nenuma/blob/main/contracts/contracts/subscription_batch.tact" target="_blank">contract code</a> and its functionality.</p> <div class="flex mt-8 gap-4 items-end overflow-x-auto snap-x snap-mandatory pb-6"><!> <!> <!> <!> <!></div> <!>`,1);function mt(i,b){L(b,!0);const h={};z(h);const c=()=>k(m,"$batchId",h),d=()=>k(O,"$batch",h),m=j(0),O=M(m);let o=F(x([]));var v=A(),N=y(v);W(N,{title:"Subscription Batch",children:(P,at)=>{var $=st(),_=y($);Q(_,{class:"grid gap-2 mt-4",children:(t,s)=>{var r=X(),g=e(y(r,!0));R(g,{type:"number",placeholder:"0",required:!0,min:"0",class:"w-fit",get value(){return c()},set value(C){H(m,C)}}),a(t,r)},$$slots:{default:!0}});var E=e(e(_,!0)),w=e(e(E,!0)),S=q(w);l(S,{class:"bg-ds-purple-800 snap-start text-white hover:bg-ds-purple-700",onclick:async()=>{try{const t=await d().getBalance();u(o).unshift({date:p(new Date),message:JSON.stringify(`${U.fromNano(t)} TON`,null,2)})}catch(t){t instanceof Error&&t.message.includes("-256")&&f.error(`Subscription Batch with id ${c()} not found. Did you deploy it?`)}},children:(t,s)=>{var r=Y();a(t,r)},$$slots:{default:!0}});var D=e(e(S,!0));l(D,{class:"bg-ds-purple-800 snap-start text-white hover:bg-ds-purple-700",onclick:async()=>{try{const t=await d().getBatchId();u(o).unshift({date:p(new Date),message:JSON.stringify(t.toString(),null,2)})}catch(t){t instanceof Error&&t.message.includes("-256")&&f.error(`Subscription Batch with id ${c()} not found. Did you deploy it?`)}},children:(t,s)=>{var r=Z();a(t,r)},$$slots:{default:!0}});var B=e(e(D,!0));l(B,{class:"bg-ds-purple-800 snap-start text-white hover:bg-ds-purple-700",onclick:async()=>{try{const t=await d().getStreamAddress();u(o).unshift({date:p(new Date),message:JSON.stringify(t.toString({testOnly:!0,bounceable:!1}),null,2)})}catch(t){t instanceof Error&&t.message.includes("-256")&&f.error(`Subscription Batch with id ${c()} not found. Did you deploy it?`)}},children:(t,s)=>{var r=tt();a(t,r)},$$slots:{default:!0}});var I=e(e(B,!0));l(I,{class:"bg-ds-purple-800 snap-start text-white hover:bg-ds-purple-700",onclick:async()=>{try{const t=await d().getSubscriptions(),s=[];for(const[r,g]of t)s.push({[r.toString({testOnly:!0,bounceable:!1})]:{remainingNotificationsCount:g.remainingNotificationsCount.toString()}});u(o).unshift({date:p(new Date),message:JSON.stringify(s,null,2)})}catch(t){t instanceof Error&&t.message.includes("-256")&&f.error(`Subscription Batch with id ${c()} not found. Did you deploy it?`)}},children:(t,s)=>{var r=et();a(t,r)},$$slots:{default:!0}});var G=e(e(I,!0));l(G,{class:"bg-ds-purple-800 snap-start text-white hover:bg-ds-purple-700",onclick:async()=>{try{const t=await d().getSubscriptionsCount();u(o).unshift({date:p(new Date),message:JSON.stringify(t.toString(),null,2)})}catch(t){t instanceof Error&&t.message.includes("-256")&&f.error(`Subscription Batch with id ${c()} not found. Did you deploy it?`)}},children:(t,s)=>{var r=rt();a(t,r)},$$slots:{default:!0}});var J=e(e(w,!0));V(J,{get output(){return u(o)},set output(t){T(o,x(t))}}),a(P,$)},$$slots:{default:!0}}),a(i,v),K()}export{mt as S};
//# sourceMappingURL=SubscriptionBatchAPI.Cn7yPc7H.js.map
