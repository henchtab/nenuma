import{b as j,a as r,e as H,t as n,f as g,s as t,c as w}from"./disclose-version.BX9sjkWX.js";import{p as K,c as U,a as X,t as V,b as i,s as Z,w as ee}from"./index.mbo8UwIt.js";import{p as q}from"./this.BAuJCPR5.js";import{u as te,b as se,a as G,s as re}from"./store.bP1OfJqg.js";import{B as l}from"./index.DDlW02wl.js";import{f as ae,L as J,I as B}from"./index.Do2oo2WQ.js";import{f as d}from"./utils.Ddqmgtfs.js";import{d as ne}from"./tma.h_RQhYAu.js";import{O as oe}from"./Output.DAlFtpD6.js";import{S as ie}from"./Section.DhfTkdYq.js";(function(){try{var c=typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},b=new Error().stack;b&&(c._sentryDebugIds=c._sentryDebugIds||{},c._sentryDebugIds[b]="133c670c-a396-486c-a37b-59edf6f88254",c._sentryDebugIdIdentifier="sentry-dbid-133c670c-a396-486c-a37b-59edf6f88254")}catch{}})();var le=n("Simple Subscriber Address <!>",1),ue=n("Deploy Simple Subscriber",1),de=n("Query ID <!>",1),ce=n("Check timeout",1),be=n("Get Balance",1),pe=n("Get Owner Address",1),fe=n("Get Notifications Count",1),me=n("Get Expires At",1),ge=n("Get Stream Address",1),he=n("Get Session Address",1),ve=n("Get Latest Candlestick",1),$e=n(`<!> <p class="mt-3 mb-8 text-ds-gray-900 max-w-[768px]">This contract sets up with an owner address and a subscriber ID. It handles subscriptions to a
    data stream, making sure there are enough funds for operations. When deployment requests come
    in, it sets the stream address, notification count, and expiration time. You can check the
    balance, owner address, number of notifications, expiration time, stream address, session
    address, and the latest candlestick data. It deals with subscribing, unsubscribing, and
    destroying sessions, even if transactions bounce. It also checks for expired subscriptions and
    notifies when time is up. Overall, it keeps the subscription process smooth and organized.</p> <div class="flex gap-4 items-end overflow-x-auto pb-6 snap-x snap-mandatory"><a class="snap-start"><!></a> <form class="flex snap-start flex-col gap-4 min-w-max"><!> <!></form> <!> <!> <!> <!> <!> <!> <!></div> <!>`,1);function Ae(c,b){K(b,!0);const p={};te(p);const u=()=>G(T,"$simpleSubscriber",p),L=()=>G(h,"$simpleSubscriberAddress",p),h=ee(""),T=ae(h);let o=U(q([]));async function E(f){f.preventDefault();const y=new FormData(f.currentTarget),m={queryId:BigInt(y.get("queryId"))};await u().checkTimeout(m)}var S=j(),M=g(S);ie(M,{title:"Simple Subscriber",children:(f,y)=>{var m=$e(),x=g(m);J(x,{class:"grid gap-2 mt-4",children:(e,a)=>{var s=le(),_=t(g(s,!0));B(_,{type:"text",name:"simpleSubscriberAddress",placeholder:"0QDCiYqpPo9esMDX35_BWYcsR1NKS7lbnPcPF6IMH8MNx2Lj",required:!0,class:"w-fit",get value(){return L()},set value(W){se(h,W)}}),r(e,s)},$$slots:{default:!0}});var Y=t(t(x,!0)),D=t(t(Y,!0)),v=w(D);V(()=>re(v,"href",`/playground/streams-api/deploy?contract=subscriber&title=${encodeURIComponent("Simple Subscriber")}&subtitle=simple subscriber`));var z=w(v);l(z,{class:"bg-ds-green-800 text-white hover:bg-ds-green-700",children:(e,a)=>{var s=ue();r(e,s)},$$slots:{default:!0}});var $=t(t(v,!0)),k=w($);J(k,{class:"flex flex-col gap-2",children:(e,a)=>{var s=de(),_=t(g(s,!0));B(_,{type:"number",name:"queryId",placeholder:"777",required:!0,min:"0"}),r(e,s)},$$slots:{default:!0}});var F=t(t(k,!0));l(F,{class:"bg-ds-green-800 text-white hover:bg-ds-green-700",type:"submit",children:(e,a)=>{var s=ce();r(e,s)},$$slots:{default:!0}});var I=t(t($,!0));l(I,{class:"bg-ds-blue-800 snap-start text-white hover:bg-ds-blue-700",onclick:async()=>{const e=await u().getBalance();i(o).unshift({date:d(new Date),message:JSON.stringify(`${ne.fromNano(e)} TON`,null,2)})},children:(e,a)=>{var s=be();r(e,s)},$$slots:{default:!0}});var O=t(t(I,!0));l(O,{class:"bg-ds-blue-800 snap-start text-white hover:bg-ds-blue-700",onclick:async()=>{const e=await u().getOwnerAddress();i(o).unshift({date:d(new Date),message:JSON.stringify(e.toString({testOnly:!0,bounceable:!1}),null,2)})},children:(e,a)=>{var s=pe();r(e,s)},$$slots:{default:!0}});var P=t(t(O,!0));l(P,{class:"bg-ds-blue-800 snap-start text-white hover:bg-ds-blue-700",onclick:async()=>{const e=await u().getNotificationsCount();i(o).unshift({date:d(new Date),message:JSON.stringify(e==null?void 0:e.toString(),null,2)})},children:(e,a)=>{var s=fe();r(e,s)},$$slots:{default:!0}});var A=t(t(P,!0));l(A,{class:"bg-ds-blue-800 snap-start text-white hover:bg-ds-blue-700",onclick:async()=>{const e=await u().getExpiresAt();i(o).unshift({date:d(new Date),message:JSON.stringify(e==null?void 0:e.toString(),null,2)})},children:(e,a)=>{var s=me();r(e,s)},$$slots:{default:!0}});var N=t(t(A,!0));l(N,{class:"bg-ds-blue-800 snap-start text-white hover:bg-ds-blue-700",onclick:async()=>{const e=await u().getStreamAddress();i(o).unshift({date:d(new Date),message:JSON.stringify(e==null?void 0:e.toString({testOnly:!0,bounceable:!1}),null,2)})},children:(e,a)=>{var s=ge();r(e,s)},$$slots:{default:!0}});var C=t(t(N,!0));l(C,{class:"bg-ds-blue-800 snap-start text-white hover:bg-ds-blue-700",onclick:async()=>{const e=await u().getSessionAddress();i(o).unshift({date:d(new Date),message:JSON.stringify(e==null?void 0:e.toString({testOnly:!0,bounceable:!1}),null,2)})},children:(e,a)=>{var s=he();r(e,s)},$$slots:{default:!0}});var Q=t(t(C,!0));l(Q,{class:"bg-ds-blue-800 snap-start text-white hover:bg-ds-blue-700",onclick:async()=>{const e=await u().getLatestCandlestick();if(!e){i(o).unshift({date:d(new Date),message:"No candlestick found"});return}const a={start:e.start.toString(),end:e.end.toString(),open:e.open.toString(),high:e.high.toString(),low:e.low.toString(),close:e.close.toString()};i(o).unshift({date:d(new Date),message:JSON.stringify(a,null,2)})},children:(e,a)=>{var s=ve();r(e,s)},$$slots:{default:!0}});var R=t(t(D,!0));oe(R,{get output(){return i(o)},set output(e){Z(o,q(e))}}),H("submit",$,E,!1),r(f,m)},$$slots:{default:!0}}),r(c,S),X()}export{Ae as S};
//# sourceMappingURL=SimpleSubscriberAPI.DRfr3ozU.js.map
